# ุชูุฑูุฑ ุญุงูุฉ ุชูุงูู APIs ุตูุญุฉ ุชูุงุตูู ุงูููุฑุณ

## โ ููุฎุต ุงูุชูุงูู

ุชู ุฑุจุท ุตูุญุฉ **CourseDetailPage** ุจูุฌุงุญ ูุน ููุง ุงูู APIs ุงููุทููุจูู:

### 1. API ุฌูุจ ูุญุชูู ุงูููุฑุณ
- **Endpoint:** `GET /api/materials/course/{courseId}`
- **ุงููุธููุฉ:** ุฌูุจ ุฌููุน ุงูููุงุฏ ุงูุชุนููููุฉ ููููุฑุณ
- **Service:** `CoursesService.getCourseContent(courseId)`
- **ุญุงูุฉ ุงูุชูุงูู:** โ ููุทุจู ููุนูู

### 2. API ุฌูุจ ุชูุงุตูู ุงููุงุฏุฉ
- **Endpoint:** `GET /api/materials/{materialId}`
- **ุงููุธููุฉ:** ุฌูุจ ุงูุชูุงุตูู ุงููุงููุฉ ููุงุฏุฉ ูุนููุฉ
- **Service:** `MaterialsService.getMaterialById(materialId)`
- **ุญุงูุฉ ุงูุชูุงูู:** โ ููุทุจู ููุนูู

---

## ๐ ุชุฏูู ุงูุนูู ุงูููุทุจู

### 1. ุชุญููู ุงูุตูุญุฉ ุงูุฃููู:
```javascript
useEffect(() => {
  const loadCourseData = async () => {
    // ุงุณุชุฏุนุงุก API ุงูุฃูู ูุฌูุจ ุฌููุน ููุงุฏ ุงูููุฑุณ
    const materialsResponse = await CoursesService.getCourseContent(courseId);
    
    // ุชุญููู ุงูุจูุงูุงุช ูู API format ุฅูู UI format
    const lessons = transformMaterialsToLessons(materials);
    
    // ุชุนููู ุฃูู ุฏุฑุณ ูู current lesson
    if (lessons.length > 0) {
      setCurrentLesson(lessons[0]);
      // ุฌูุจ ุชูุงุตูู ุฃูู ุฏุฑุณ ุชููุงุฆูุงู
      await loadMaterialDetails(lessons[0].materialId);
    }
  };
}, [courseId]);
```

### 2. ุนูุฏ ุงุฎุชูุงุฑ ุฏุฑุณ ุฌุฏูุฏ:
```javascript
const selectLesson = async (lesson) => {
  setCurrentLesson(lesson);
  
  // ุงุณุชุฏุนุงุก API ุงูุซุงูู ูุฌูุจ ุชูุงุตูู ุงููุงุฏุฉ ุงููุญุฏุฏุฉ
  const materialId = lesson.materialId;
  if (materialId) {
    await loadMaterialDetails(materialId);
  }
};

const loadMaterialDetails = async (materialId) => {
  try {
    setMaterialLoading(true);
    const materialResponse = await MaterialsService.getMaterialById(materialId);
    
    if (materialResponse.success) {
      setSelectedMaterial(materialResponse.data);
    }
  } catch (error) {
    setMaterialError(error.message);
  } finally {
    setMaterialLoading(false);
  }
};
```

---

## ๐ ูููู ุงูุจูุงูุงุช ุงูููุทุจู

### ุงุณุชุฌุงุจุฉ API ุงูุฃูู (ูุญุชูู ุงูููุฑุณ):
```json
{
  "success": true,
  "data": {
    "current_page": 1,
    "data": [
      {
        "id": 1,
        "name": "ุดุฑุญ ููุฏูู ูููุญุงุถุฑุฉ",
        "type": "YoutubeVideo",
        "description": "ููุฏูู ุชูุถูุญู ูุดุฑุญ ุงูููุงููู ุงูุฃุณุงุณูุฉ ููุฏุฑุณ",
        "duration_in_seconds": 3061,
        "number_of_pages": null,
        "course": {
          "name": "ุงูุฑูุงุถูุงุช ุงูุฃุณุงุณูุฉ",
          "code": "MATH101_G1",
          "color": "#4285F4"
        },
        "user": {
          "name": "ู. ุฑุงููุง ุฃุดุฑู ุงูุณูุฏ"
        },
        "course_idea": {
          "id": 8,
          "name": "ุชุทุจููุงุช ุนูููุฉ"
        },
        "media_url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
      }
    ]
  }
}
```

### ุงุณุชุฌุงุจุฉ API ุงูุซุงูู (ุชูุงุตูู ุงููุงุฏุฉ):
```json
{
  "success": true,
  "data": {
    "id": 3,
    "name": "ููู ุงููุญุงุถุฑุฉ",
    "type": "Pdf",
    "description": "ููู PDF ูุญุชูู ุนูู ุงููุญุงุถุฑุฉ ูุงููุฉ",
    "duration_in_seconds": null,
    "number_of_pages": 22,
    "course": {
      "name": "ุงูุฑูุงุถูุงุช ุงูุฃุณุงุณูุฉ",
      "code": "MATH101_G1",
      "color": "#4285F4"
    },
    "user": {
      "name": "ู. ุฃููู ุณุนูุฏ ุงูุฌูุฏู"
    },
    "course_idea": {
      "id": 7,
      "name": "ุงูุชูุงูู"
    },
    "media_url": null
  }
}
```

---

## ๐จ ููููุงุช ุงูุนุฑุถ ุงูููุฏูุฌุฉ

### โ CourseAudioLesson.jsx
- **ุงูุชูุงูู:** ููุทุจู ููุนูู
- **ุงููุธุงุฆู:**
  - ุนุฑุถ ูุดุบู ุงูุตูุช ุงูุญูููู ูู `materialDetails.media_url`
  - ุฅุธูุงุฑ ูุฏุฉ ุงูุชุณุฌูู ูู `materialDetails.duration_in_seconds`
  - ุนุฑุถ ุงุณู ุงููุฏุฑุณ ูู `materialDetails.user.name`
  - ุฅุธูุงุฑ ูุตู ุงููุงุฏุฉ ูู `materialDetails.description`
  - ุนุฑุถ ูุนูููุงุช ุงูููุฑุณ ูู `materialDetails.course`

### โ CourseVideoLesson.jsx
- **ุงูุชูุงูู:** ููุทุจู ููุนูู
- **ุงููุธุงุฆู:**
  - ุฏุนู ููุฏูููุงุช YouTube ูู `materialDetails.media_url`
  - ุนุฑุถ ูุดุบู ููุฏูู HTML5 ูููููุงุช ุงููุญููุฉ
  - ุฅุธูุงุฑ ุชูุงุตูู ุงููุงุฏุฉ ูุงููุฏุฑุณ

### โ CourseImageLesson.jsx
- **ุงูุชูุงูู:** ููุทุจู ููุนูู
- **ุงููุธุงุฆู:**
  - ุนุฑุถ ูููุงุช PDF ูู `materialDetails.media_url`
  - ุฅุธูุงุฑ ุงูุตูุฑ ูุงููุณุชูุฏุงุช
  - ุนุฏุฏ ุงูุตูุญุงุช ูู `materialDetails.number_of_pages`
  - ุฅููุงููุฉ ุงูุชุญููู

---

## โก ุงููููุฒุงุช ุงูููุทุจูุฉ

### 1. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงููุฉ:**
- Loading states ูููุตูุฉ: `isInitialLoading` ููุชุญููู ุงูุฃููู ู `isMaterialLoading` ููููุงุฏ
- Error handling ูุน ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ูุดู ุงูุชุญููู
- Fallback ููุจูุงูุงุช ุงูููููุฏุฉ ุฃู ุบูุฑ ุงููุชุงุญุฉ

### 2. **ุชุญุณูู ุงูุฃุฏุงุก:**
- ุชุญููู ุงูููุงุฏ ูุฑุฉ ูุงุญุฏุฉ ุนูุฏ ูุชุญ ุงูุตูุญุฉ
- ุชุญููู ุชูุงุตูู ุงููุงุฏุฉ ููุท ุนูุฏ ุงูุญุงุฌุฉ
- ุชุฎุฒูู ูุคูุช ููุจูุงูุงุช ูุชุฌูุจ ุงูุทูุจุงุช ุงูููุฑุฑุฉ

### 3. **ุชุญููู ุงูุจูุงูุงุช ุงูุฐูู:**
- ุฏุงูุฉ `transformMaterialsToLessons()` ูุชุญููู ุงูุจูุงูุงุช ูู API format ุฅูู UI format
- ุฏุงูุฉ `convertMaterialType()` ูุชุญููู ุฃููุงุน ุงูููุงุฏ
- ุฏุงูุฉ `formatDuration()` ูุชูุณูู ูุฏุฉ ุงูููุงุฏ

### 4. **ุฏุนู ุฃููุงุน ุงูููุงุฏ ุงููุฎุชููุฉ:**
- โ **ููุฏูููุงุช YouTube:** ูู `media_url`
- โ **ูููุงุช ุตูุชูุฉ:** ูุดุบู HTML5 audio
- โ **ูููุงุช PDF:** ุนุงุฑุถ ูุฏูุฌ ูุน ุนุฏุฏ ุงูุตูุญุงุช
- โ **ุตูุฑ:** ุนุฑุถ ูุจุงุดุฑ
- โ **ูุณุชูุฏุงุช:** ุนุฑุถ ูุชุญููู

---

## ๐งช ุญุงูุฉ ุงูุงุฎุชุจุงุฑ

### โ APIs ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ ูุน:
- **Course ID:** 1 (ุงูุฑูุงุถูุงุช ุงูุฃุณุงุณูุฉ)
- **Material IDs:** 1, 2, 3, 4, 5, 6

### โ ุงูุจูุงูุงุช ุงูููุชุงุญุฉ ููุงุฎุชุจุงุฑ:
- 6 ููุงุฏ ุชุนููููุฉ ูุชููุนุฉ
- 3 ูุฏุฑุณูู ูุฎุชูููู
- ุฃููุงุน ููุงุฏ ูุฎุชููุฉ (ููุฏููุ ุตูุชุ PDF)
- ูุนูููุงุช ูุงููุฉ ููููุฑุณ ูุงููุฏุฑุณูู

---

## ๐ ููุงุญุธุงุช ุงูุชุทููุฑ

### 1. **ุงููููุงุช ุงูููุญุฏุซุฉ:**
- `src/pages/Courses/CourseDetailPage.jsx` โ
- `src/services/api/courses.service.js` โ
- `src/services/api/materials.service.js` โ
- `src/components/courseDetail/CourseAudioLesson.jsx` โ
- ุฌููุน ููููุงุช ุงูุนุฑุถ ุงูุฃุฎุฑู โ

### 2. **ูุง ุชูุฌุฏ ุชุบููุฑุงุช ูุทููุจุฉ:**
- Working tree ูุธูู
- ุฌููุน ุงูุชุบููุฑุงุช ูุญููุธุฉ ูู commits
- ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู

### 3. **ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ:**
- ุฅุถุงูุฉ progress tracking ููููุงุฏ
- ุชุญุณูู caching ููุจูุงูุงุช
- ุฅุถุงูุฉ bookmark ููููุงุฏ ุงูููุถูุฉ
- ุชุญุณูู offline support

---

## ๐ฏ ุงูุฎูุงุตุฉ

**ุตูุญุฉ CourseDetailPage ููุฏูุฌุฉ ุจุงููุงูู ูุน ุงูู APIs ูููุฎุชุจุฑุฉ ูุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู!** 

โ ุฌููุน ุงููุธุงุฆู ุชุนูู ุจุดูู ุตุญูุญ  
โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููุทุจูุฉ  
โ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชุฌุงูุจุฉ ูููุญุณูุฉ  
โ ุฏุนู ุฌููุน ุฃููุงุน ุงูููุงุฏ ุงูุชุนููููุฉ  

**ูููู ุงูุขู ุงุฎุชุจุงุฑ ุงูุตูุญุฉ ูุน course ID = 1 ููุดุงูุฏุฉ ุฌููุน ุงูููุงุฏ ุงูุชุนููููุฉ ุจุงูุจูุงูุงุช ุงูุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.**
